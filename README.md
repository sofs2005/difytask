# DifyTask 定时任务插件

一个支持多种定时格式的微信定时消息插件。

作者: sofs2005
版本: v2.1.0
描述: 支持多种定时格式的微信定时消息插件
许可: MIT License

## 功能特点
- 支持自然语言设置定时任务
- 支持私聊和群聊消息发送
- 支持在私聊中创建指定群、用户任务（密码保护）
- 支持任务列表查看（密码保护）

## 使用方法

### 1. 创建定时任务
直接发送时间描述和任务内容，格式：`$time 任意时间和任务内容描述`

a. 任务描述中含有提醒字样，则会被直接转发，否则会依次调用插件，如果插件都没做处理，则最后发给所接LLM处理
b. 私聊任务描述中对象含有"群\g"字样，则会被认为是群任务，否则会被认为是私聊任务，支持模糊匹配
c. 私聊新建指定群、用户任务需提供密码，可以任意描述，你能看懂即可

### 2. 任务管理
# 查看任务列表（需要密码）
$time 任务列表 你的密码

# 取消任务
$time 取消任务ID（不区分大小写）

## 配置说明
在插件目录下创建 `config.json`：
{
    "task_list_password": "your_password",
    "openai_api_base": "https://api.openai.com/v1",
    "openai_api_key": "your-api-key-here",
    "openai_model": "gpt-3.5-turbo"
}

## 注意事项
1. LLM强烈建议使用R1模型，不需要满血，哪个快用哪个，否则可能无法正确解析命令
2. 查看任务列表，私聊建立群任务以及其他人员的任务需要配置密码
3. 取消任务需要任务ID，可以从任务列表中查看
4. 在私聊中创建群任务时，需要确保机器人在目标群中
5. 由于微信机制，请在机器人微信上将所有群聊保存后重启插件，否则将无法拿到群信息
6. 自己测试后确定能重现的bug请在issue提出，本插件已比较完善，请自行摸索理解使用，失业人员，不做日常QA，望谅解

开源不易，感谢打赏支持！

![打赏](https://github.com/sofs2005/difytask/blob/main/img/wx.png?raw=true)
