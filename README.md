# DifyTask 定时任务插件

一个支持多种定时格式的微信定时消息插件。

作者: sofs2005
版本: v2.0.0
描述: 支持多种定时格式的微信定时消息插件
许可: MIT License

## 功能特点
- 支持自然语言设置定时任务
- 支持私聊和群聊消息发送
- 支持在私聊中创建群任务
- 支持任务列表查看（密码保护）

## 使用方法

### 1. 创建定时任务
直接发送时间描述和任务内容，格式：`$time 时间描述 任务内容`

示例：

# 喝水提醒（每30分钟）
$time 每30分钟 提醒喝水了，该补充水分了

# 休息提醒（每2小时）
$time 每2小时 提醒久坐伤身，起来走动一下

# 吃饭提醒（每天）
$time 每天12:00 提醒该吃午饭了
$time 每天18:00 提醒晚饭时间到了

### 2. 消息转发
不带"提醒"前缀的内容会被直接转发给对应的插件处理

# 使用总结插件，总结最近5小时的聊天记录
$time 每天8:00 总结 -5h

# 使用画图插件，生成早安图片
$time 每天09:00 画一个早安图片

# 使用天气插件，获取天气信息
$time 每天7:30 上海天气

### 3. 私聊创建群任务
# 在私聊中创建群任务，使用g[群名]格式
$time 每天09:30 g[测试群]早安打卡

### 4. 任务管理
# 查看任务列表（需要密码）
$time 任务列表 你的密码

# 取消任务
$time 取消 任务ID

## 配置说明
在插件目录下创建 `config.json`：
{
    "task_list_password": "your_password",
    "openai_api_base": "https://api.openai.com/v1",
    "openai_api_key": "your-api-key-here",
    "openai_model": "gpt-3.5-turbo"
}

## 注意事项
1. LLM建议使用聪明一些的模型，比如gpt-4o-mini，否则可能无法解析时间
2. 查看任务列表，私聊建立群任务以及其他人员的任务需要配置密码
3. 取消任务需要任务ID，可以从任务列表中查看
4. 在私聊中创建群任务时，需要确保机器人在目标群中
5. 由于微信机制，请在机器人微信上将所有群聊保存后重启插件，否则将无法拿到群信息

开源不易，感谢打赏支持！

![打赏](https://github.com/sofs2005/difytask/blob/main/img/wx.png?raw=true)
